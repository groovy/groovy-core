dependencies {
    compile rootProject
    testCompile rootProject.sourceSets.test.runtimeClasspath
    testCompile project(':groovy-test')
}

task moduleDescriptor(type: org.codehaus.groovy.gradle.WriteExtensionDescriptorTask) {
    extensionClasses = 'org.codehaus.groovy.macro.runtime.MacroGroovyMethods,org.codehaus.groovy.macro.matcher.ASTMatcher'
}

compileJava.dependsOn moduleDescriptor